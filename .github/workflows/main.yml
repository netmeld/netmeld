name: CI

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    # Checks-out under $GITHUB_WORKSPACE
    - uses: actions/checkout@v2
    
    - name: Install Dependencies
      run: sudo apt-get install  libpqxx-dev
    
    - name: Version Checks
      run: |
        apt search libpqxx
        g++-9 --version
        cmake --version
        docker --version

    - name: Configure
      run: cmake
        -DCMAKE_CXX_COMPILER=g++-9
        -DCMAKE_C_COMPILER=gcc-9
        -DBOOST_ROOT=$BOOST_ROOT_1_69_0
        -DBoost_ADDITIONAL_VERSIONS=1.69.0
        -DBoost_ARCHITECTURE=-x64
        -DBoost_USE_MULTITHREADED=ON
        -S . -B build
    
    - name: Build
      run: cmake --build build
